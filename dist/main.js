(()=>{"use strict";const e=e=>{const t=document.getElementById(e),o=document.createElement("div");o.style.cssText="font-size: 2rem",o.style.color="#fff",t.addEventListener("submit",(e=>{n(e,t)}));const n=(e,t)=>{e.preventDefault(),t.appendChild(o),o.textContent="Загрузка...";const n=new FormData(t);let s={};n.forEach(((e,t)=>{s[t]=e})),a(s).then((e=>{if(200!==e.status)throw new Error("status network not 200");o.textContent="Спасибо! Мы скоро свяжемся с вами!",t.reset(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content");let n=Date.now();setTimeout((function(){o.textContent=""}),1e3),setTimeout((function(){let o=Date.now()-n;t.style.left=3*o+"px",e.style.display="none"}),2e3)})()})).catch((e=>{o.textContent="Что-то пошло не так...",console.log(e)}))},a=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};(function(e){let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");const a=setInterval((function(){let e=function(){let e=(new Date("26 january 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();e.hours.toString().length<=1?t.textContent="0"+e.hours:t.textContent=e.hours,e.minutes.toString().length<=1?o.textContent="0"+e.minutes:o.textContent=e.minutes,e.seconds.toString().length<=1?n.textContent="0"+e.seconds:n.textContent=e.seconds,e.timeRemaining<=0&&(clearInterval(a),t.textContent="00",o.textContent="00",n.textContent="00")}),10)})(),(()=>{const e=document.querySelector("menu"),t=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(o=>{const n=o.target;n.closest("li>a")&&t(),(n.closest(".menu")||n.closest(".close-btn")||!n.closest(".active-menu")&&e.classList.contains("active-menu"))&&t()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");t.forEach((t=>{t.addEventListener("click",(()=>{if(document.documentElement.clientWidth>768){let t=Date.now(),n=setInterval((function(){let a=Date.now()-t;e.style.display="block",o.style.left=2.5*a+"px",a>=300&&clearInterval(n)}),20)}else e.style.display="block"})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,a)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(a)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let n,a,s=0;(()=>{for(let o=0;o<=e.length-1;o++){let e=document.createElement("li");e.classList.add("dot"),0==o&&e.classList.add("dot-active"),t.append(e)}n=document.querySelectorAll(".dot")})();const l=(e,t,o)=>{e[t].classList.remove(o)},c=(e,t,o)=>{e[t].classList.add(o)},r=()=>{l(e,s,"portfolio-item-active"),l(n,s,"dot-active"),s++,s>=e.length&&(s=0),c(e,s,"portfolio-item-active"),c(n,s,"dot-active")},i=(e=3e3)=>{a=setInterval(r,e)};o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(l(e,s,"portfolio-item-active"),l(n,s,"dot-active"),o.matches("#arrow-right")?s++:o.matches("#arrow-left")?s--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(s=t)})),s>=e.length&&(s=0),s<0&&(s=e.length-1),c(e,s,"portfolio-item-active"),c(n,s,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.querySelector("#command .row");e.addEventListener("mouseover",(e=>{if(e.target.classList.contains("command__photo")){let t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}})),e.addEventListener("mouseout",(e=>{if(e.target.classList.contains("command__photo")){let t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}}))})(),((e=100)=>{document.querySelector(".calc-block").addEventListener("input",(e=>{"INPUT"==e.target.tagName&&(e.target.value=e.target.value.replace(/\D/g,""))}));const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),s=document.querySelector(".calc-count"),l=document.getElementById("total");t.addEventListener("change",(t=>{const c=t.target;(c.matches(".calc-type")||c.matches(".calc-square")||c.matches(".calc-day")||c.matches(".calc-count"))&&(()=>{let t=0,c=1,r=1;const i=o.options[o.selectedIndex].value,u=+n.value;s.value>1&&(c+=(s.value-1)/10),a.value&&a.value<5?r*=2:a.value&&a.value<10&&(r*=1.5),i&&u&&(t=Math.floor(e*i*u*c*r)),l.textContent=t,o.options[o.selectedIndex].value||(t=0,n.value="",s.value="",a.value="")})()}))})(100),document.body.addEventListener("input",(e=>{let t=e.target;"INPUT"===t.tagName&&"user_name"==t.name?t.value=t.value.replace(/[^а-я\s]/gi,""):"INPUT"===t.tagName&&"user_phone"==t.name?(t.setAttribute("maxLength",13),t.value=t.value.replace(/[^+\d$]/,"")):"INPUT"===t.tagName&&"user_message"==t.name?t.value=t.value.replace(/[^а-яёА-ЯЁ\s\,\.\!\?\-]/gi,""):"INPUT"===t.tagName&&"user_email"==t.name&&(t.value=t.value.replace(/[^a-z-0-9@.\s]/i,""))})),document.body.addEventListener("focusout",(e=>{let t=e.target;if("user_phone"==t.name)t.style.border="none",t.setCustomValidity(""),t.value.length<7&&(t.setCustomValidity("Введите от 7 до 13 цифр, включая +"),t.value="",t.style.border="3px solid red");else if("user_email"==t.name){const e=/^\w+@\w+\.\w{2,}$/;t.style.border="none",t.setCustomValidity(""),!1===e.test(t.value)&&(t.setCustomValidity("Введите корректный e-mail"),t.value="",t.style.border="2px solid red")}else"user_name"==t.name&&(t.style.border="none",t.setCustomValidity(""),t.value.length<=2&&(t.setCustomValidity("Введите от 2х букв"),t.value="",t.style.border="2px solid red"))})),e("form1"),e("form2"),e("form3")})();